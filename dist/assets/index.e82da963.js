import{p as e,a,u as s,r as t,w as l,b as o,o as n,c as r,d as u,F as i,e as m,T as d,A as c,D as p,N as f,f as h,g as v,h as b,i as y,j as w,k as g,t as _,l as k,m as U,n as S,v as V,q as z,s as F,x as T,V as L}from"./vendor.ecb0a575.js";!function(e=".",a="__import__"){try{self[a]=new Function("u","return import(u)")}catch(s){const t=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[a]=e=>new Promise(((s,o)=>{const n=new URL(e,t);if(self[a].moduleMap[n])return s(self[a].moduleMap[n]);const r=new Blob([`import * as m from '${n}';`,`${a}.moduleMap['${n}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${e}`)),l(u)},onload(){s(self[a].moduleMap[n]),l(u)}});document.head.appendChild(u)})),self[a].moduleMap={}}}("assets/");const N=m("data-v-28b68bee");e("data-v-28b68bee");const C={class:"header"},E={class:"img"};a();const x={expose:[],emits:["TableNameFun"],setup(e){const a={0:{suprizeUrl:"./assets/白露.c4a2c381.png"},1:{suprizeUrl:"./assets/白露.c4a2c381.png"},2:{suprizeUrl:"./assets/春分.595e3f9b.png"},3:{suprizeUrl:"./assets/大寒.6da86201.png"},4:{suprizeUrl:"./assets/立春.2ad4dedf.png"},5:{suprizeUrl:"./assets/芒种.a6203e27.png"},6:{suprizeUrl:"./assets/小满.ffebd0f3.png"},7:{suprizeUrl:"./assets/秋分.b606a0bd.png"},8:{suprizeUrl:"./assets/小雪.2246cb8a.png"},9:{suprizeUrl:"./assets/小暑.83ae19d2.png"}},m=s(),d=t(Math.floor(9*Math.random())),c=t(""),p=t(!0);return l((()=>c.value),((e,a)=>{"000000"===e&&m.emit("TableNameFun","GiftMoneyList",1),"111111"===e&&m.emit("TableNameFun","GiftMoneyList2",0),"222222"===e&&m.emit("TableNameFun","GiftMoneyList3",0)})),N(((e,s)=>{const t=o("van-password-input"),l=o("van-number-keyboard");return n(),r(i,null,[u("header",C,[u("div",E,[u("img",{src:a[d.value].suprizeUrl,alt:""},null,8,["src"])])]),u(t,{value:c.value,focused:p.value,onFocus:s[1]||(s[1]=e=>p.value=!0)},null,8,["value","focused"]),u(l,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=e=>c.value=e),show:p.value,onBlur:s[3]||(s[3]=e=>p.value=!1)},null,8,["modelValue","show"])],64)}))}};function O(e,a,s){const t=c.Object.extend(s),l=()=>{const s=new t;let l=!1;if(e.list.forEach((a=>{a.name===e.form.name&&(f("姓名重复"),l=!0)})),!l){for(const a in e.form)if(Object.hasOwnProperty.call(e.form,a)){const t=e.form[a];s.set(a,t)}s.save().then((s=>{f({type:"success",message:"保存成功!"}),e.show=!1,e.form={},a()}))}},o=()=>{const t=c.Object.createWithoutData(s,e.form.id);t.set("name",e.form.name),t.set("money",e.form.money),t.set("label",e.form.label),t.save().then((s=>{f({type:"success",message:"保存成功!"}),e.show=!1,e.form={},a()}))};return{newFun:()=>{e.show=!0,e.isAdd=!0,e.form={}},addFun:l,onSubmit:a=>{if(a){const{pinyin:t,initials:n}=(s=a.name,{pinyin:p.getFullChars(s).toLowerCase(),initials:p.getCamelChars(s).toLowerCase()});e.form.pinyin=t,e.form.initials=n,e.isAdd?l():o()}var s},editFun:a=>{e.form={},e.show=!0,e.isAdd=!1;for(const s in a)if(Object.hasOwnProperty.call(a,s)){const t=a[s];e.form[s]=t}},updateFun:o,deleteFun:e=>{h.confirm({title:"删除",message:"确认删除吗"}).then((()=>{c.Object.createWithoutData(s,e).destroy().then((e=>{f({type:"success",message:"删除成功!"}),a()}))}))}}}x.__scopeId="data-v-28b68bee";const R=m("data-v-8afaf494");e("data-v-8afaf494");const j={class:"header"},M={class:"main"},A={class:"title"},q={class:"name"},G={class:"footer"},P=F("记一笔"),B={class:"upBtn"},W={class:"content"},$=F("亲戚"),D=F("朋友"),I=F("同事"),H={style:{margin:"16px"}},Q=F(" 提交 ");a();const K={expose:[],props:{TableName:String,sort:Number},setup(e){const a=e,s=v({valueSearch:"",isAdd:!1,visible:!1,loading:!1,show:!1,showEye:!1,list:[],form:{},valueSort:a.sort}),t=[{text:"默认排序",value:0},{text:"金额排序",value:1}];b((()=>{window.addEventListener("scroll",m),m(),p()})),y((()=>{window.removeEventListener("scroll",m)}));const l=e=>{window.scrollTo(0,0)},m=e=>{let a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t=window.outerHeight;s.visible=a>t/3},{updateList:p,onRefresh:f}=function(e,a){const s=async()=>{console.log("updateList---",a);try{d.loading({message:"加载中...",forbidClick:!0});const s=new c.Query(a),t=await s.find(),l=[];e.list=[],t.forEach((a=>{a.attributes.id=a.id,a.attributes.createdAt=a.createdAt,a.attributes.updatedAt=a.updatedAt,e.list.push(a.attributes),l.push({name:a.attributes.name,money:a.attributes.money})})),setTimeout((()=>{d.clear(),e.loading=!1}),500)}catch(s){console.log("error",s)}};return{updateList:s,onRefresh:()=>{s()}}}(s,a.TableName),{newFun:h,addFun:T,onSubmit:L,editFun:N,updateFun:C,deleteFun:E}=O(s,p,a.TableName),x=w((()=>""===s.valueSearch&&0===s.valueSort?s.list.sort(((e,a)=>e.name.localeCompare(a.name))):""===s.valueSearch&&1===s.valueSort?s.list.sort(((e,a)=>a.money-e.money)):s.list.filter((e=>e.name===s.valueSearch||e.pinyin===s.valueSearch||e.initials===s.valueSearch||K(e.name))))),K=e=>{let a=!1;for(let t=0;t<[...e].length;t++){if([...e][t]===s.valueSearch){a=!0;break}}return a},X=w((()=>"总人数："+s.list.length)),Y=w((()=>{let e=0;return s.list.forEach((a=>{e+=a.money})),+s.showEye?"总金额：****":"总金额："+Number(e).toLocaleString("en-US")}));return R(((e,a)=>{const m=o("van-search"),d=o("van-dropdown-item"),c=o("van-dropdown-menu"),p=o("van-icon"),v=o("van-cell"),b=o("van-sticky"),y=o("van-tag"),w=o("van-button"),T=o("van-swipe-cell"),C=o("van-pull-refresh"),O=o("van-tabbar-item"),K=o("van-tabbar"),J=o("van-field"),Z=o("van-checkbox"),ee=o("van-checkbox-group"),ae=o("van-form"),se=o("van-popup");return n(),r(i,null,[u(b,null,{default:R((()=>[u("header",j,[u(m,{modelValue:g(s).valueSearch,"onUpdate:modelValue":a[1]||(a[1]=e=>g(s).valueSearch=e),"show-action":"",shape:"round",placeholder:"请输入搜索关键词"},{action:R((()=>[])),_:1},8,["modelValue"]),u(c,{"active-color":"#1989fa"},{default:R((()=>[u(d,{modelValue:g(s).valueSort,"onUpdate:modelValue":a[2]||(a[2]=e=>g(s).valueSort=e),options:t},null,8,["modelValue"])])),_:1}),u(v,{title:g(X)},{"right-icon":R((()=>[u("span",null,_(g(Y)),1),g(s).showEye?(n(),r(p,{key:0,onClick:a[3]||(a[3]=e=>g(s).showEye=!g(s).showEye),name:"closed-eye",size:"25"})):(n(),r(p,{key:1,onClick:a[4]||(a[4]=e=>g(s).showEye=!g(s).showEye),name:"eye",size:"25"}))])),_:1},8,["title"])])])),_:1}),u(C,{modelValue:g(s).loading,"onUpdate:modelValue":a[5]||(a[5]=e=>g(s).loading=e),onRefresh:g(f)},{default:R((()=>[u("main",M,[(n(!0),r(i,null,k(g(x),(e=>(n(),r(T,{key:e.id},{right:R((()=>[u(w,{square:"",type:"primary",text:"编辑",onClick:a=>g(N)(e)},null,8,["onClick"]),u(w,{square:"",type:"danger",text:"删除",onClick:a=>g(E)(e.id)},null,8,["onClick"])])),default:R((()=>[u(v,{value:g(s).showEye?"****":e.money},{title:R((()=>[u("div",A,[u("div",q,[u("span",null,_(e.name),1)]),(n(!0),r(i,null,k(e.label,((e,a)=>(n(),r(y,{key:a,class:"m-r-5",size:"medium",round:"",type:"primary"},{default:R((()=>[F(_(e),1)])),_:2},1024)))),128))])])),_:2},1032,["value"])])),_:2},1024)))),128))])])),_:1},8,["modelValue","onRefresh"]),u("footer",G,[u(K,null,{default:R((()=>[u(O,null,{icon:R((()=>[u(w,{round:"",size:"small",icon:"plus",type:"primary",onClick:g(h)},{default:R((()=>[P])),_:1},8,["onClick"])])),_:1})])),_:1})]),u("div",B,[u(U,{name:"van-fade"},{default:R((()=>[S(u(w,{round:"",size:"small",icon:"arrow-up",type:"primary",onClick:l},null,512),[[V,g(s).visible]])])),_:1})]),g(s).show?(n(),r(se,{key:0,show:g(s).show,"onUpdate:show":a[9]||(a[9]=e=>g(s).show=e),round:"",style:{width:"80%",height:"auto"}},{default:R((()=>[u("div",W,[u(ae,{onSubmit:g(L)},{default:R((()=>[u(J,{modelValue:g(s).form.name,"onUpdate:modelValue":a[6]||(a[6]=e=>g(s).form.name=e),label:"姓名",name:"name",placeholder:"姓名",rules:[{required:!0,message:"请填写姓名"}]},null,8,["modelValue"]),u(J,{modelValue:g(s).form.money,"onUpdate:modelValue":a[7]||(a[7]=e=>g(s).form.money=e),modelModifiers:{number:!0},label:"金额",name:"money",placeholder:"金额",rules:[{required:!0,message:"请填写金额"}]},null,8,["modelValue"]),u(J,{name:"checkboxGroup",label:"标签（非必填）"},{input:R((()=>[u(ee,{modelValue:g(s).form.label,"onUpdate:modelValue":a[8]||(a[8]=e=>g(s).form.label=e),direction:"horizontal"},{default:R((()=>[u(Z,{class:"p-b-10",name:"亲戚",shape:"square"},{default:R((()=>[$])),_:1}),u(Z,{class:"p-b-10",name:"朋友",shape:"square"},{default:R((()=>[D])),_:1}),u(Z,{class:"p-b-10",name:"同事",shape:"square"},{default:R((()=>[I])),_:1})])),_:1},8,["modelValue"])])),_:1}),u("div",H,[u(w,{round:"",block:"",type:"primary","native-type":"submit"},{default:R((()=>[Q])),_:1})])])),_:1},8,["onSubmit"])])])),_:1},8,["show"])):z("",!0)],64)}))},__scopeId:"data-v-8afaf494"};const X=T({expose:[],setup(e){const a=v({TableName:"",sort:0}),s=(e,s)=>{a.TableName=e,a.sort=s};return(e,t)=>(n(),r(i,null,[""===g(a).TableName?(n(),r(x,{key:0,onTableNameFun:s})):z("",!0),""!==g(a).TableName?(n(),r(K,{key:1,TableName:g(a).TableName,sort:g(a).sort},null,8,["TableName","sort"])):z("",!0)],64))}});c.init({appId:"Ogxo701Gmazmorp5nQovO0LE-gzGzoHsz",appKey:"yRSPGVk0Pgo8SOXBSGv0nW5W",serverURL:"https://ogxo701g.lc-cn-n1-shared.com"}),X.use(L),X.mount("#app");
